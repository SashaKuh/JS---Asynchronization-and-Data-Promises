{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEaC,SAASC,cAAc,SAG/BC,iBAAiB,UAEtB,SAAkBC,GAChBA,EAAIC,iBAEJ,MAAQC,MAAAC,EAAKC,KAAEA,EAAIC,OAAEA,GAAW,CAC9BH,MAAOI,OAAON,EAAIO,cAAcL,MAAMM,OACtCJ,KAAME,OAAON,EAAIO,cAAcH,KAAKI,OACpCH,OAAQC,OAAON,EAAIO,cAAcF,OAAOG,QAG1C,IAAIC,EAAI,GAER,SAASC,IACHD,EAAIJ,IAmBWM,EAjBHF,EAAI,EAiBSP,EAlBRC,EAAQC,EAAOK,EAmBtB,IAAIG,SAAQ,CAACC,EAASC,KACpCC,YAAW,KACaC,KAAKC,SAAW,GAEpCJ,EAAQ,C,SAAEF,E,MAAUT,IAEpBY,EAAO,C,SAAEH,E,MAAUT,GAAQ,GAE5BA,EAAM,KAzBJgB,MAAK,EAACP,SAAEA,EAAQT,MAAEA,MACjBP,EAAAwB,OAAOC,QAAQ,qBAAqBT,QAAeT,MAAU,IAE9DmB,OAAM,EAACV,SAAEA,EAAQT,MAAEA,MAClBP,EAAAwB,OAAOG,QAAQ,oBAAoBX,QAAeT,MAAU,IAE7DqB,SAAQ,KACPd,IACAC,GAAkB,IAQ5B,IAAuBC,EAAUT,C,CAH/BQ,E","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst form = document.querySelector('.form');\n\n\nform.addEventListener('submit', onSubmit);\n\nfunction onSubmit(evt) {\n  evt.preventDefault();\n\n  const { delay, step, amount } = {\n    delay: Number(evt.currentTarget.delay.value),\n    step: Number(evt.currentTarget.step.value),\n    amount: Number(evt.currentTarget.amount.value),\n  };\n\n  let i = 0;\n\n  function sendNotification() {\n    if (i < amount) {\n      let promiseDelay = delay + step * i;\n      createPromise(i + 1, promiseDelay)\n        .then(({ position, delay }) => {\n          Notify.success(`Fulfilled promise ${position} in ${delay}ms`);\n        })\n        .catch(({ position, delay }) => {\n          Notify.failure(`Rejected promise ${position} in ${delay}ms`);\n        })\n        .finally(() => {\n          i++;\n          sendNotification();\n        });\n    }\n  }\n\n  sendNotification();\n}\n\nfunction createPromise(position, delay) {\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const shouldResolve = Math.random() > 0.3;\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n  return promise;\n}\n"],"names":["$iQIUW","parcelRequire","document","querySelector","addEventListener","evt","preventDefault","delay","delay1","step","amount","Number","currentTarget","value","i","sendNotification","position","Promise","resolve","reject","setTimeout","Math","random","then","Notify","success","catch","failure","finally"],"version":3,"file":"03-promises.7c57d9b1.js.map"}