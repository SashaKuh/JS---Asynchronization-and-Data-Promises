{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEaC,SAASC,cAAc,SAG/BC,iBAAiB,UAEtB,SAAkBC,GAChBA,EAAIC,iBAEJ,IAAgCC,EAAA,CAC9BC,MAAOC,OAAOJ,EAAIK,cAAcF,MAAMG,OACtCC,KAAMH,OAAOJ,EAAIK,cAAcE,KAAKD,OACpCE,OAAQJ,OAAOJ,EAAIK,cAAcG,OAAOF,QAHlCG,EAAwBP,EAAxBC,MAAOI,EAAiBL,EAAjBK,KAAMC,EAAWN,EAAXM,OAMjBE,EAAI,GAER,SAASC,IAEL,IAkBiBC,EAAUT,EAnBzBO,EAAIF,IAmBWI,EAjBHF,EAAI,EAiBSP,EAlBRM,EAAQF,EAAOG,EAmBtB,IAAIG,SAAQ,SAACC,EAASC,GACpCC,YAAW,WACaC,KAAKC,SAAW,GAEpCJ,EAAQ,CAAEF,WAAUT,UAEpBY,EAAO,CAAEH,WAAUT,S,GAEpBA,E,KAzBEgB,MAAK,SAAAC,G,IAAGR,EAAQQ,EAARR,SAAUT,EAAKiB,EAALjB,MACjBR,EAAA0B,OAAOC,QAAQ,qBAAoCC,OAAfX,EAAS,QAAYW,OAANpB,EAAM,M,IAE1DqB,OAAM,SAAAJ,G,IAAGR,EAAQQ,EAARR,SAAUT,EAAKiB,EAALjB,MAClBR,EAAA0B,OAAOI,QAAQ,oBAAmCF,OAAfX,EAAS,QAAYW,OAANpB,EAAM,M,IAEzDuB,SAAQ,WACPhB,IACAC,G,IAKRA,E","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst form = document.querySelector('.form');\n\n\nform.addEventListener('submit', onSubmit);\n\nfunction onSubmit(evt) {\n  evt.preventDefault();\n\n  const { delay, step, amount } = {\n    delay: Number(evt.currentTarget.delay.value),\n    step: Number(evt.currentTarget.step.value),\n    amount: Number(evt.currentTarget.amount.value),\n  };\n\n  let i = 0;\n\n  function sendNotification() {\n    if (i < amount) {\n      let promiseDelay = delay + step * i;\n      createPromise(i + 1, promiseDelay)\n        .then(({ position, delay }) => {\n          Notify.success(`Fulfilled promise ${position} in ${delay}ms`);\n        })\n        .catch(({ position, delay }) => {\n          Notify.failure(`Rejected promise ${position} in ${delay}ms`);\n        })\n        .finally(() => {\n          i++;\n          sendNotification();\n        });\n    }\n  }\n\n  sendNotification();\n}\n\nfunction createPromise(position, delay) {\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const shouldResolve = Math.random() > 0.3;\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n  return promise;\n}\n"],"names":["$h6c0i","parcelRequire","document","querySelector","addEventListener","evt","preventDefault","ref","delay","Number","currentTarget","value","step","amount","delay1","i","sendNotification","position","Promise","resolve","reject","setTimeout","Math","random","then","param","Notify","success","concat","catch","failure","finally"],"version":3,"file":"03-promises.cd5c777f.js.map"}